version = "3.7.12"

# Alignment and indentation
align.preset = most
align.multiline = false
assumeStandardLibraryStripMargin = true
danglingParentheses.preset = true
indent.main = 2
indent.significant = 2
indent.callSite = 2
indent.ctrlSite = 2
indent.defnSite = 2
indent.caseSite = 2
indent.extendSite = 2
indent.withSiteRelativeToExtends = 2

# Line length and wrapping
maxColumn = 120
newlines.beforeCurlyLambdaParams = multilineWithCaseOnly
newlines.afterCurlyLambdaParams = squash
newlines.implicitParamListModifierPrefer = before
newlines.avoidForSimpleOverflow = [punct, slc]

# Rewrite rules for cleaner code
rewrite.rules = [
  RedundantBraces,
  RedundantParens,
  SortModifiers,
  PreferCurlyFors,
  Imports
]

rewrite.redundantBraces.maxLines = 3
rewrite.redundantBraces.includeUnitMethods = true
rewrite.redundantBraces.stringInterpolation = true

# Import organization
rewrite.imports.sort = ascii
rewrite.imports.groups = [
  ["javax?\\.", "scala\\."],
  [".*"],
  ["mycompany\\..*"]
]

# Scala 3 specific settings
runner.dialect = scala3

# Docstring formatting
docstrings.style = Asterisk
docstrings.wrap = no

# Trailing commas
trailingCommas = preserve

# Spaces
spaces.inImportCurlyBraces = false
spaces.inInterpolatedStringCurlyBraces = false
spaces.afterKeywordBeforeParen = true

# Vertical alignment
verticalMultiline.atDefnSite = true
verticalMultiline.arityThreshold = 100
verticalMultiline.newlineAfterOpenParen = true

# Comments
comments.wrap = trailing
comments.wrapStandaloneSlcAsSlc = true

# Project-specific settings for data analysis
project.excludeFilters = [
  "target/"
]

# Optional: Format on save integration
fileOverride {
  "glob:**/src/main/scala/**" {
    runner.dialect = scala3
  }
  "glob:**/src/test/scala/**" {
    runner.dialect = scala3
  }
}